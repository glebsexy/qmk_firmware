/* Copyright 2022 Gleb Sabirzyanov <@zyumbik>
 * SPDX-License-Identifier: GPL-2.0+
 */

#include QMK_KEYBOARD_H

enum layer_names {
    _BASE,
    _HIERARCHY,
    _NAVIGATE
};

// Bottom, Middle, Top, Encoder Bottom, Encoder Top
// Joystick: Left, Right, Top, Bottom, Middl–µ
const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {
    [_BASE] = LAYOUT(
        KC_LEFT_GUI, KC_LEFT_ALT, TO(_HIERARCHY), LGUI(KC_C), LGUI(KC_V),
        KC_LEFT, KC_RIGHT, KC_UP, KC_DOWN, OSM(MOD_LSFT)
    ),
    [_HIERARCHY] = LAYOUT(
        KC_LEFT_GUI, KC_LEFT_ALT, TO(_NAVIGATE), LSFT(LGUI(KC_G)), LALT(LGUI(KC_G)),
        LSFT(KC_ENTER), KC_ENTER, LSFT(KC_TAB), KC_TAB, LALT(KC_L)
    ),
    [_NAVIGATE] = LAYOUT(
        LALT(KC_H), KC_LEFT_ALT, TO(_BASE), LALT(KC_8), LALT(KC_9),
        LALT(KC_A), LALT(KC_D), LALT(KC_W), LALT(KC_S), LALT(KC_V)
    ),
};

#if defined(ENCODER_MAP_ENABLE)
const uint16_t PROGMEM encoder_map[][NUM_ENCODERS][2] = {
    [_BASE] = { 
        ENCODER_CCW_CW(LGUI(KC_MINUS), LGUI(KC_EQUAL)), 
        ENCODER_CCW_CW(LGUI(KC_Z), LSFT(LGUI(KC_Z)))
    },
    [_HIERARCHY] = { 
        ENCODER_CCW_CW(KC_HOME, KC_END),
        ENCODER_CCW_CW(LGUI(KC_RBRC), LGUI(KC_LBRC))
    },
    [_NAVIGATE] = {
        ENCODER_CCW_CW(LSFT(LCTL(KC_TAB)), LCTL(KC_TAB)),
        ENCODER_CCW_CW(KC_PAGE_UP, KC_PAGE_DOWN)
    },
};
#endif

#if defined(OLED_ENABLE)
static void render_logo(void) {
    static const char PROGMEM raw_logo[] = {
        0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,248,  8,232,168,232,  8,232,232,232,  8,232,168,232,  8,232,168,232,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,248,  0,  0,  0,  0,  0,  0,
        0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,255,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,254,  2,  2,  2,  2,130,130,130,130,130,130,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,130,130,130,130,130,130,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,254,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,255,  0,  0,  0,  0,  0,  0, 
        0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,255,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,255,  0,  0,  0,  0, 31, 16, 16,240, 16, 31,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4, 31, 16,240, 16, 16, 31,  0,  0,  0,  0,  0,128,128,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,255,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,255,  0,  0,  0,  0,  0,  0, 
        0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,255,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,255,  0,  0,  0,  0,  0,  0,  0,255,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,255,  0,  0,  0,  0,  0,  0,  0,  0, 15,240,  1,  2,  2,  4,  4,  8, 16, 16, 32, 32, 64,128,128,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,255,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,255,  0,  0,  0,  0,  0,  0, 
        0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,255,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,255,  0,  0,  0,  0,126, 66, 66, 67, 66,126,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,126, 66, 67, 66, 66,126,  0,  0,  0,  0,  0,  0,  3,124,128,  0,  0,  0,224, 16,  8,  8,  8,  8,  8,  8,  5,  5,  6,  4,  4,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,127,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,255,  0,  0,  0,  0,  0,  0, 
        0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,255,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,255,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 15,112, 12,  3,  0,  0,  0,  0,  0,153,  0,  0,  1,  1,  0,128, 33, 81,144, 32,  1,193, 32, 80, 81, 49,  0, 32, 17,209, 96, 16, 49,  1,  0,144,113,  1,128,112,  1,  1,  0,  0,153,  0,  0,  0,255,  0,  0,  0,  0,  0,  0, 
        0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,255,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,255,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,153,  0,  0,128,128,  1,  2,130,130,  2,  1,128,129,  2,  2,130,128,  0,  3,130,129,  2,  2,145,160, 32, 33,146,142,  1,  0,128,128,  0,  0,153,  0,  0,  0,255,  0,  0,  0,  0,  0,  0, 
        0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 15,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8, 15,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8, 14,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8,  8, 15,  0,  0,  0,  0,  0,  0,
    };
    oled_write_raw_P(raw_logo, sizeof(raw_logo));
}


bool oled_task_user(void) {
    // oled_write_P(PSTR("  Layer: "), false);

    // switch (get_highest_layer(layer_state)) {
    //     case _NAV:
    //         oled_write_P(PSTR("Navigation\n"), false);
    //         break;
    //     case _HIERARCHY:
    //         oled_write_P(PSTR("Auto Layout\n"), false);
    //         break;
    //     default:
    //         oled_write_P(PSTR("Default\n"), false);
    // }

    render_logo();

    return false;
};
#endif